# Network Correlation 指标解释功能 - 设计展示

## 🎯 设计目标

为非网络岗位用户提供通俗易懂的网络指标解释，帮助他们理解网络指标变化对交易性能的影响。

---

## 📊 五大核心指标对比

| 维度 | Packet Loss<br/>丢包率 | Retransmission<br/>重传率 | Duplicate ACK<br/>重复确认 | TCP Setup Success<br/>建连成功率 | TCP RST<br/>连接重置 |
|------|----------------------|--------------------------|---------------------------|-------------------------------|---------------------|
| **图标** | 📉 | 🔄 | 🔁 | 🔗 | ⚡ |
| **分类** | Performance | Performance | Performance | Availability | Availability |
| **生活比喻** | 快递丢失 | 重复说话 | 收错包裹 | 电话接通 | 电话挂断 |
| **正常范围** | < 1% | < 2% | < 3% | > 99.5% | < 1% |
| **警告范围** | 1-5% | 2-10% | 3-10% | 95-99.5% | 1-5% |
| **严重范围** | > 5% | > 10% | > 10% | < 95% | > 5% |
| **主要影响** | 响应变慢 | 带宽浪费 | 吞吐降低 | 无法连接 | 交易中断 |
| **排查方向** | 设备/链路 | 丢包/延迟 | 路径/拥塞 | 资源/防火墙 | 应用/设备 |

---

## 🎨 视觉设计对比

### 三种状态的视觉表现

| 状态 | 图标 | 背景色（浅色） | 背景色（深色） | 文字色（浅色） | 文字色（深色） | 使用场景 |
|------|------|---------------|---------------|---------------|---------------|----------|
| **正常** | ✅ | `bg-green-50` | `bg-green-900/25` | `text-green-600` | `text-green-400` | 指标在正常范围内 |
| **警告** | ⚠️ | `bg-amber-50` | `bg-amber-900/25` | `text-amber-600` | `text-amber-400` | 指标轻微超出正常范围 |
| **严重** | 🔴 | `bg-red-50` | `bg-red-900/25` | `text-red-600` | `text-red-400` | 指标严重超出正常范围 |

---

## 💬 文案设计对比

### 不同状态下的消息示例

| 指标 | 正常状态消息 | 警告状态消息 | 严重状态消息 |
|------|-------------|-------------|-------------|
| **Packet Loss** | ✅ 正常 - 丢包率 0.5%<br/>（正常 <1%） | ⚠️ 轻微影响 - 丢包率 2.5%<br/>（正常 <1%） | 🔴 严重影响 - 丢包率 8%<br/>（正常 <1%） |
| **Retransmission** | ✅ 正常 - 重传率 1%<br/>（正常 <2%） | ⚠️ 轻微影响 - 重传率 5%<br/>（正常 <2%） | 🔴 严重影响 - 重传率 15%<br/>（正常 <2%） |
| **Duplicate ACK** | ✅ 正常 - 重复确认 2%<br/>（正常 <3%） | ⚠️ 轻微影响 - 重复确认 6%<br/>（正常 <3%） | 🔴 严重影响 - 重复确认 12%<br/>（正常 <3%） |
| **TCP Setup** | ✅ 正常 - 建连成功率 99.8%<br/>（正常 >99.5%） | ⚠️ 轻微影响 - 建连成功率 97%<br/>（正常 >99.5%） | 🔴 严重影响 - 建连成功率 92%<br/>（正常 >99.5%） |
| **TCP RST** | ✅ 正常 - RST 率 0.3%<br/>（正常 <1%） | ⚠️ 轻微影响 - RST 率 3%<br/>（正常 <1%） | 🔴 严重影响 - RST 率 8%<br/>（正常 <1%） |

---

## 🎭 交互状态对比

### 信息图标的四种状态

| 状态 | 视觉效果 | 颜色 | 缩放 | 光标 | 触发条件 |
|------|---------|------|------|------|---------|
| **默认** | ⓘ | `text-neutral-400` | 1.0 | `default` | 未交互 |
| **悬停** | ⓘ | `text-blue-600` | 1.1 | `pointer` | 鼠标悬停 |
| **激活** | ⓘ | `text-blue-700` | 1.1 | `pointer` | 浮层打开 |
| **禁用** | ⓘ | `text-neutral-300` | 1.0 | `not-allowed` | 无数据时 |

---

## 📐 尺寸规范对比

### 不同设备的浮层尺寸

| 设备类型 | 屏幕宽度 | 浮层宽度 | 最大高度 | 定位方式 | 遮罩层 |
|---------|---------|---------|---------|---------|--------|
| **桌面端** | > 1024px | 320px | 400px | 智能定位（右侧优先） | 无 |
| **平板端** | 768-1024px | 280px | 360px | 智能定位（左右自适应） | 无 |
| **移动端** | < 768px | calc(100vw - 32px) | 80vh | 屏幕居中 | 有（bg-black/50） |

---

## 🎬 动画参数对比

### 不同动画的时长和缓动

| 动画类型 | 时长 | 缓动函数 | 变换属性 | 透明度 | 使用场景 |
|---------|------|---------|---------|--------|---------|
| **浮层淡入** | 200ms | ease-out | scale(0.95→1)<br/>translateY(-4px→0) | 0→1 | 打开浮层 |
| **浮层淡出** | 150ms | ease-in | scale(1→0.95)<br/>translateY(0→-4px) | 1→0 | 关闭浮层 |
| **图标悬停** | 150ms | ease-in-out | scale(1→1.1) | - | 鼠标悬停图标 |
| **遮罩淡入** | 200ms | ease-out | - | 0→1 | 移动端打开 |

---

## 🔍 内容结构对比

### 浮层内容的五个部分

| 部分 | 标题 | 内容类型 | 字体大小 | 颜色 | 间距 | 必需性 |
|------|------|---------|---------|------|------|--------|
| **定义** | "定义" | 单行文本 | 12px | neutral-700 | mb-1 | 必需 |
| **通俗解释** | "通俗解释" | 多行文本 | 12px | neutral-700 | mb-1 | 必需 |
| **对交易的影响** | "对交易的影响" | 列表（3项） | 12px | neutral-700 | mb-1 | 必需 |
| **当前状态** | "当前状态" | 状态卡片 | 12px | 根据状态 | mb-1 | 可选（有数据时） |
| **可能原因** | "可能原因" 或 "保持良好" | 列表（4项）或文本 | 12px | neutral-700 | - | 条件（异常时显示原因） |

---

## 🎯 业务影响对比

### 五个指标对交易的具体影响

| 指标 | 影响 1 | 影响 2 | 影响 3 | 严重程度 |
|------|--------|--------|--------|---------|
| **Packet Loss** | 交易响应时间变长<br/>（需要重传数据） | 交易失败率上升<br/>（重传超时或中断） | 用户体验下降<br/>（页面加载缓慢） | ⚠️ 中等 |
| **Retransmission** | 交易处理时间延长<br/>（等待重传完成） | 网络带宽浪费<br/>（同样的数据发送多次） | 服务器负载增加<br/>（处理重传请求） | ⚠️ 中等 |
| **Duplicate ACK** | 触发快速重传机制<br/>（性能下降） | 网络吞吐量降低<br/>（传输效率下降） | 交易响应时间波动<br/>（不稳定） | ⚠️ 中等 |
| **TCP Setup** | 交易无法发起<br/>（连接失败） | 用户看到连接错误提示 | 交易成功率直接下降 | 🔴 严重 |
| **TCP RST** | 正在进行的交易被中断 | 交易失败率上升 | 用户体验极差<br/>（操作被打断） | 🔴 严重 |

---

## 🔧 可能原因对比

### 五个指标异常时的排查方向

| 指标 | 原因 1 | 原因 2 | 原因 3 | 原因 4 |
|------|--------|--------|--------|--------|
| **Packet Loss** | 网络设备故障或过载<br/>（交换机、路由器） | 物理链路质量差<br/>（网线、光纤老化） | 防火墙策略导致丢包 | 网络拥塞<br/>（带宽不足） |
| **Retransmission** | 网络丢包<br/>（参考 Packet Loss） | 网络延迟抖动<br/>（延迟不稳定） | 接收端处理能力不足<br/>（缓冲区溢出） | 网络路径不稳定<br/>（路由频繁变化） |
| **Duplicate ACK** | 数据包乱序<br/>（网络路径不稳定） | 网络拥塞<br/>（队列溢出导致丢包） | 负载均衡配置不当<br/>（会话保持问题） | 网络设备性能瓶颈 |
| **TCP Setup** | 服务器资源耗尽<br/>（连接数、内存、CPU） | 防火墙限制<br/>（连接数、SYN Flood 防护） | 网络设备故障<br/>（交换机、负载均衡器） | 服务端应用问题<br/>（监听队列满） |
| **TCP RST** | 应用程序异常关闭<br/>（代码 bug、超时） | 防火墙主动断开<br/>（策略限制） | 服务器资源不足<br/>（强制关闭连接） | 网络中间设备故障<br/>（NAT、负载均衡器） |

---

## 📱 响应式设计对比

### 三种设备的布局差异

| 特性 | 桌面端 | 平板端 | 移动端 |
|------|--------|--------|--------|
| **浮层宽度** | 320px（固定） | 280px（固定） | calc(100vw - 32px)（自适应） |
| **定位方式** | 绝对定位（图标右侧） | 绝对定位（智能左右） | 固定定位（屏幕居中） |
| **遮罩层** | 无 | 无 | 有（半透明黑色） |
| **关闭方式** | 点击外部、ESC、关闭按钮 | 点击外部、ESC、关闭按钮 | 点击遮罩、关闭按钮 |
| **滚动方式** | 浮层内滚动 | 浮层内滚动 | 浮层内滚动 |
| **最大高度** | 400px | 360px | 80vh |

---

## ✅ 验收标准对比

### 四个维度的验收要求

| 维度 | 检查项 1 | 检查项 2 | 检查项 3 | 检查项 4 |
|------|---------|---------|---------|---------|
| **功能完整性** | 5 个指标都有解释 | 信息图标正确显示 | 浮层显示/隐藏正常 | 状态评估准确 |
| **用户体验** | 内容通俗易懂 | 浮层定位合理 | 动画流畅自然 | 支持多种关闭方式 |
| **视觉一致性** | 遵循设计规范 | 深色模式适配 | 响应式布局正常 | 状态颜色清晰 |
| **性能** | 打开/关闭无卡顿 | 不影响图表渲染 | 内存占用合理 | 无内存泄漏 |

---

## 🚀 实施优先级对比

### 四个阶段的工作重点

| 阶段 | 时长 | 核心任务 | 交付物 | 优先级 |
|------|------|---------|--------|--------|
| **Phase 1<br/>基础组件** | 1-2 天 | 创建类型、配置、工具、组件 | 可独立运行的组件 | 🔴 P0 |
| **Phase 2<br/>集成优化** | 1 天 | 集成到现有系统，添加数据计算 | 完整集成的功能 | 🔴 P0 |
| **Phase 3<br/>交互动画** | 0.5 天 | 智能定位、动画、响应式 | 流畅的用户体验 | 🟡 P1 |
| **Phase 4<br/>测试调优** | 0.5 天 | 功能测试、性能优化 | 测试报告、优化建议 | 🟡 P1 |

---

## 🎓 设计原则对比

### 五个核心设计原则

| 原则 | 说明 | 实现方式 | 预期效果 | 优先级 |
|------|------|---------|---------|--------|
| **降低认知负担** | 用通俗语言解释专业术语 | 生活化比喻（快递、电话等） | 非技术人员能快速理解 | 🔴 最高 |
| **建立因果关系** | 说明网络指标如何影响交易 | "对交易的影响"部分 | 理解问题的业务影响 | 🔴 最高 |
| **提供行动指南** | 异常时给出排查方向 | "可能原因"部分 | 提高问题定位效率 | 🟡 高 |
| **渐进式披露** | 默认隐藏，按需显示 | 点击图标才显示浮层 | 避免信息过载 | 🟡 高 |
| **智能评估** | 自动判断指标状态 | 基于阈值的状态计算 | 降低判断成本 | 🟢 中 |

---

## 📊 预期效果对比

### 三个层面的预期收益

| 层面 | 收益 1 | 收益 2 | 收益 3 | 可衡量指标 |
|------|--------|--------|--------|-----------|
| **对用户** | 降低学习成本 | 提高工作效率 | 增强定位信心 | 理解度调查、使用时长 |
| **对产品** | 提升易用性 | 增强专业性 | 扩大用户群 | 满意度评分、用户增长 |
| **对团队** | 减少支持成本 | 提升口碑 | 积累经验 | 咨询量下降、NPS 提升 |

---

## 🎉 成功标志

当你看到以下所有指标都达成时，说明功能开发成功：

| 指标 | 目标值 | 测量方式 |
|------|--------|---------|
| **功能完整性** | 100% | 所有检查项通过 |
| **用户理解度** | > 80% | 非技术人员能理解解释内容 |
| **使用率** | > 30% | 信息图标点击率 |
| **满意度** | > 4.0/5.0 | 用户满意度调查 |
| **性能** | < 100ms | 浮层打开/关闭耗时 |
| **错误率** | < 1% | 功能异常率 |

---

## 📞 相关资源

| 资源类型 | 文档名称 | 用途 |
|---------|---------|------|
| **详细设计** | network-metrics-explanation-design.md | 完整设计方案 |
| **UI 原型** | network-metrics-ui-mockup.md | 视觉设计参考 |
| **实现指南** | network-metrics-implementation-guide.md | 开发指导 |
| **快速参考** | network-metrics-quick-reference.md | 开发速查 |
| **设计总结** | network-metrics-explanation-summary.md | 方案总结 |

