# Network Metrics Explanation - UI 原型示意

## 📐 展开状态 - 完整布局

```
┌────────────────────────────────────────────────────────────────────────────┐
│ Network Correlation                    [Normal]  [Availability] [Performance] [×] │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  30 ┤                                                                      │
│     │     ╱╲                                                               │
│  20 ┤    ╱  ╲    ╱╲                                                        │
│     │   ╱    ╲  ╱  ╲                                                       │
│  10 ┤  ╱      ╲╱    ╲___                                                   │
│     │ ╱                  ───────                                           │
│   0 ┼────────────────────────────────────────────────────────────────────  │
│     10:00  10:05  10:10  10:15  10:20  10:25  10:30  10:35  10:40         │
│                                                                            │
│     Legend:                                                                │
│     ━━ Packet Loss ⓘ    ━━ Retransmission ⓘ    ━━ Duplicate ACK ⓘ      │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

## 💡 信息图标交互

### 1. 默认状态（未悬停）
```
━━ Packet Loss ⓘ
               ↑
            灰色图标
```

### 2. 悬停状态
```
━━ Packet Loss ⓘ
               ↑
          蓝色高亮 + 手型光标
```

### 3. 点击后 - 浮层显示
```
━━ Packet Loss ⓘ ←─────────────────────────────────┐
               ↑                                    │
          激活状态                                  │
                                                    │
┌───────────────────────────────────────────────────┘
│ ┌──────────────────────────────────────────┐
│ │ 📊 Packet Loss (丢包率)             [×] │
│ ├──────────────────────────────────────────┤
│ │                                          │
│ │ 定义                                     │
│ │ 网络传输过程中数据包丢失的比例           │
│ │                                          │
│ │ 通俗解释                                 │
│ │ 就像寄快递时包裹丢失，需要重新寄送。     │
│ │ 丢包率越高，数据传输越不可靠。           │
│ │                                          │
│ │ 对交易的影响                             │
│ │ • 交易响应时间变长（需要重传数据）       │
│ │ • 交易失败率上升（重传超时或中断）       │
│ │ • 用户体验下降（页面加载缓慢）           │
│ │                                          │
│ │ 当前状态                                 │
│ │ ⚠️ 轻微影响 - 丢包率 2.5%（正常 <1%）   │
│ │                                          │
│ │ 可能原因                                 │
│ │ • 网络设备故障或过载                     │
│ │ • 物理链路质量差                         │
│ │ • 防火墙策略导致丢包                     │
│ │ • 网络拥塞（带宽不足）                   │
│ │                                          │
│ └──────────────────────────────────────────┘
└─
```

## 🎨 浮层样式详细说明

### Header 区域
```
┌──────────────────────────────────────────┐
│ 📊 Packet Loss (丢包率)             [×] │
└──────────────────────────────────────────┘
  ↑                                      ↑
图标 + 中英文名称                    关闭按钮
字体: 14px, 加粗                    悬停变红
颜色: neutral-900 / neutral-100
```

### 内容区域
```
┌──────────────────────────────────────────┐
│ 定义                                     │ ← 小标题
│ 网络传输过程中数据包丢失的比例           │ ← 内容
│                                          │
│ 通俗解释                                 │
│ 就像寄快递时包裹丢失，需要重新寄送。     │
│ 丢包率越高，数据传输越不可靠。           │
└──────────────────────────────────────────┘
  ↑                                      
小标题: 12px, 加粗, neutral-600
内容: 12px, 常规, neutral-700
行高: 1.6 (提高可读性)
```

### 影响列表
```
┌──────────────────────────────────────────┐
│ 对交易的影响                             │
│ • 交易响应时间变长（需要重传数据）       │
│ • 交易失败率上升（重传超时或中断）       │
│ • 用户体验下降（页面加载缓慢）           │
└──────────────────────────────────────────┘
  ↑
列表项: 12px, 常规
项目符号: • (实心圆点)
间距: 每项之间 4px
```

### 状态评估区域
```
┌──────────────────────────────────────────┐
│ 当前状态                                 │
│ ⚠️ 轻微影响 - 丢包率 2.5%（正常 <1%）   │
└──────────────────────────────────────────┘
  ↑        ↑
状态图标  状态文字 + 数值
颜色根据状态变化:
  ✅ 正常 - green-600
  ⚠️ 轻微影响 - amber-600
  🔴 严重影响 - red-600
```

## 🎯 不同状态的浮层示例

### 示例 1: 正常状态 - TCP Setup Success
```
┌──────────────────────────────────────────┐
│ 📊 TCP Setup Success (建连成功率)  [×] │
├──────────────────────────────────────────┤
│                                          │
│ 定义                                     │
│ TCP 三次握手成功建立连接的比例           │
│                                          │
│ 通俗解释                                 │
│ 就像打电话时能否接通。建连成功率低说明   │
│ 很多"电话"打不通，交易无法开始。         │
│                                          │
│ 对交易的影响                             │
│ • 交易无法发起（连接失败）               │
│ • 用户看到连接错误提示                   │
│ • 交易成功率直接下降                     │
│                                          │
│ 当前状态                                 │
│ ✅ 正常 - 建连成功率 99.8%（正常 >99.5%）│
│                                          │
│ 保持良好                                 │
│ 当前网络连接质量良好，无需关注。         │
│                                          │
└──────────────────────────────────────────┘
```

### 示例 2: 警告状态 - Retransmission
```
┌──────────────────────────────────────────┐
│ 📊 Retransmission (重传率)          [×] │
├──────────────────────────────────────────┤
│                                          │
│ 定义                                     │
│ TCP 协议检测到数据丢失后重新发送的比例   │
│                                          │
│ 通俗解释                                 │
│ 就像打电话时对方没听清，你需要重复说一遍。│
│ 重传率高说明网络质量差，需要频繁重复发送。│
│                                          │
│ 对交易的影响                             │
│ • 交易处理时间延长（等待重传完成）       │
│ • 网络带宽浪费（同样的数据发送多次）     │
│ • 服务器负载增加（处理重传请求）         │
│                                          │
│ 当前状态                                 │
│ ⚠️ 轻微影响 - 重传率 5%（正常 <2%）     │
│                                          │
│ 可能原因                                 │
│ • 网络丢包（参考 Packet Loss）           │
│ • 网络延迟抖动（延迟不稳定）             │
│ • 接收端处理能力不足（缓冲区溢出）       │
│ • 网络路径不稳定（路由频繁变化）         │
│                                          │
└──────────────────────────────────────────┘
```

### 示例 3: 严重状态 - TCP RST
```
┌──────────────────────────────────────────┐
│ 📊 TCP RST (连接重置)               [×] │
├──────────────────────────────────────────┤
│                                          │
│ 定义                                     │
│ TCP 连接被强制中断的次数                 │
│                                          │
│ 通俗解释                                 │
│ 就像打电话时突然被挂断。RST 多说明连接   │
│ 经常被异常中断，交易无法完成。           │
│                                          │
│ 对交易的影响                             │
│ • 正在进行的交易被中断                   │
│ • 交易失败率上升                         │
│ • 用户体验极差（操作被打断）             │
│                                          │
│ 当前状态                                 │
│ 🔴 严重影响 - RST 率 12%（正常 <1%）    │
│                                          │
│ 可能原因                                 │
│ • 应用程序异常关闭连接（代码 bug）       │
│ • 防火墙主动断开（策略限制）             │
│ • 服务器资源不足（强制关闭连接）         │
│ • 网络中间设备故障（NAT、负载均衡器）    │
│                                          │
│ 建议操作                                 │
│ 1. 检查应用日志，查找异常关闭原因        │
│ 2. 检查防火墙和安全设备配置              │
│ 3. 监控服务器资源使用情况                │
│                                          │
└──────────────────────────────────────────┘
```

## 📱 响应式适配

### 桌面端（> 1024px）
```
浮层宽度: 320px
定位: 图标右侧 8px
最大高度: 400px (超出滚动)
```

### 平板端（768px - 1024px）
```
浮层宽度: 280px
定位: 智能定位（空间不足时左侧）
最大高度: 360px
```

### 移动端（< 768px）
```
┌────────────────────────────────────┐
│ [遮罩层 - 半透明黑色]              │
│                                    │
│  ┌──────────────────────────────┐ │
│  │ 📊 Packet Loss          [×] │ │
│  ├──────────────────────────────┤ │
│  │                              │ │
│  │ [内容区域 - 可滚动]          │ │
│  │                              │ │
│  └──────────────────────────────┘ │
│                                    │
└────────────────────────────────────┘

浮层宽度: calc(100vw - 32px)
定位: 屏幕居中
添加遮罩层: bg-black/50
点击遮罩关闭
```

## 🎬 动画效果

### 浮层出现动画
```css
@keyframes fadeInScale {
  0% {
    opacity: 0;
    transform: scale(0.95) translateY(-4px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

duration: 200ms
easing: ease-out
```

### 浮层消失动画
```css
@keyframes fadeOutScale {
  0% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  100% {
    opacity: 0;
    transform: scale(0.95) translateY(-4px);
  }
}

duration: 150ms
easing: ease-in
```

### 信息图标悬停动画
```css
transition: all 150ms ease-in-out

hover:
  color: blue-600
  transform: scale(1.1)
```

## 🎨 颜色规范

### 浮层背景
```
Light Mode: bg-white
Dark Mode: bg-neutral-800
```

### 边框
```
Light Mode: border-neutral-200
Dark Mode: border-neutral-600
```

### 文字颜色
```
标题:
  Light: text-neutral-900
  Dark: text-neutral-100

小标题:
  Light: text-neutral-600
  Dark: text-neutral-400

正文:
  Light: text-neutral-700
  Dark: text-neutral-300
```

### 状态颜色
```
正常 (✅):
  Light: text-green-600, bg-green-50
  Dark: text-green-400, bg-green-900/25

警告 (⚠️):
  Light: text-amber-600, bg-amber-50
  Dark: text-amber-400, bg-amber-900/25

严重 (🔴):
  Light: text-red-600, bg-red-50
  Dark: text-red-400, bg-red-900/25
```

## ✨ 交互细节

### 信息图标
```
默认: text-neutral-400
悬停: text-blue-600 + scale(1.1)
激活: text-blue-700
尺寸: 14px × 14px
光标: cursor-pointer
```

### 关闭按钮
```
默认: text-neutral-400
悬停: text-red-600 + bg-red-50
尺寸: 16px × 16px
位置: 右上角 8px padding
```

### 浮层定位逻辑
```javascript
// 优先级顺序
1. 右侧（距离图标 8px）
2. 左侧（空间不足时）
3. 上方（左右都不足时）
4. 居中（移动端）

// 边界检测
- 距离视口边缘至少 16px
- 垂直方向与图标对齐
- 超出视口时自动调整
```

